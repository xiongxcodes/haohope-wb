{"hidden":true,"children":[{"configs":{"itemId":"module"},"expanded":true,"children":[{"configs":{"layout":"border","itemId":"viewport1"},"expanded":true,"children":[{"configs":{"itemId":"toolbar1","region":"north"},"expanded":true,"children":[{"configs":{"itemId":"checkInBtn","tooltip":"检入选择的文件","text":"检入","iconCls":"check_in_icon"},"expanded":false,"children":[],"type":"item","events":{"click":"app.checkInFile();"}},{"configs":{"itemId":"deleteBtn","tooltip":"删除选择的文件","text":"删除","iconCls":"delete_icon"},"expanded":false,"children":[],"type":"item","events":{"click":"app.deleteFile();"}},{"configs":{"itemId":"item3","text":"-"},"expanded":true,"children":[],"type":"item"},{"configs":{"itemId":"searchCombo","onTriggerClick":"this.collapse();\napp.grid1.store.load({\n  out: app.toolbar1\n});","emptyText":"文件名","triggerCls":"x-form-search-trigger","width":"250","displayField":"FILE_PATH","enterKeyTriggerClick":"true"},"expanded":true,"children":[{"configs":{"itemId":"store","url":"m?xwl=dev/ide/version/search-file"},"expanded":false,"children":[],"type":"store"}],"type":"combo","events":{"select":"Ext.callback(combo.onTriggerClick, combo);"}},{"configs":{"itemId":"resetSearchBtn","tooltip":"重置搜索结果","text":"重置搜索","iconCls":"undo_icon"},"expanded":false,"children":[],"type":"item","events":{"click":"app.grid1.store.load();"}}],"type":"toolbar"},{"configs":{"itemId":"grid1","region":"center","multiSelect":"true"},"expanded":true,"children":[{"configs":{"itemId":"store","autoLoad":"true","url":"m?xwl=dev/ide/version/select-file"},"expanded":false,"children":[],"type":"store"},{"configs":{"itemId":"columns"},"expanded":true,"children":[{"configs":{"itemId":"numCol","xtype":"rownumberer"},"expanded":false,"children":[],"type":"column"},{"configs":{"itemId":"checkDateCol","dataIndex":"CHECK_DATE","width":"130","text":"检出日期"},"expanded":false,"children":[],"type":"column"},{"configs":{"itemId":"fileDateCol","dataIndex":"CHECK_DATE","width":"130","text":"修改日期"},"expanded":false,"children":[],"type":"column"},{"configs":{"itemId":"filePathCol","dataIndex":"FILE_PATH","width":"300","text":"文件路径"},"expanded":false,"children":[],"type":"column"},{"configs":{"itemId":"userCol","dataIndex":"DISPLAY_NAME","width":"100","text":"检出用户"},"expanded":false,"children":[],"type":"column"},{"configs":{"itemId":"versionCol","dataIndex":"VERSION","width":"80","text":"版本号"},"expanded":false,"children":[],"type":"column"},{"configs":{"itemId":"versionDescCol","dataIndex":"VERSION_DESC","flex":"1","text":"说明"},"expanded":false,"children":[],"type":"column"},{"configs":{"itemId":"actionCol","xtype":"actioncolumn","width":"60","text":"操作","align":"center"},"expanded":true,"children":[{"configs":{"itemId":"items"},"expanded":true,"children":[{"configs":{"itemId":"checkInAction","handler":"app.checkInFile(record);","tooltip":"检入文件","iconCls":"check_in_icon"},"expanded":false,"children":[],"type":"column"},{"configs":{"itemId":"deleteAction","handler":"app.deleteFile(record);","tooltip":"删除文件","iconCls":"delete_icon"},"expanded":false,"children":[],"type":"column"}],"type":"array"}],"type":"column"}],"type":"array"}],"type":"grid"}],"type":"viewport"}],"type":"module","events":{"initialize":"Wb.apply(app, {\n  //删除选择的文件\n  deleteFile: function(rec) {\n    var recs = rec ? [rec] : app.grid1.getSelection();\n    Wb.confirmDo(recs, function() {\n      Wb.request({\n        url: 'm?xwl=dev/ide/version/delete-file',\n        params: {\n          destroy: Wb.getData(recs, true)\n        },\n        success: function(resp) {\n          Wb.remove(app.grid1, recs, rec ? false : true);\n        }\n      });\n    }, 'FILE_PATH');\n  },\n  //检入选择的文件\n  checkInFile: function(rec) {\n    var recs = rec ? [rec] : app.grid1.getSelection();\n    if (recs.length != 1) {\n      Wb.warn('请选择1个需要检入的文件或目录。');\n      return;\n    }\n    rec = recs[0];\n    Wb.confirm('确定需要检入该' + (Ext.String.endsWith(rec.data.FILE_PATH, '.xwl') ? '文件' : '目录') + '吗？', function() {\n      Wb.request({\n        url: 'm?xwl=dev/ide/version/check-in',\n        params: rec.data,\n        success: function(resp) {\n          Wb.tip('文件被成功检入。');\n        }\n      });\n    });\n  }\n});"}}],"roles":{},"title":"版本管理","iconCls":"","inframe":false,"pageLink":""}