{"hidden":false,"children":[{"configs":{"itemId":"module"},"expanded":true,"children":[{"configs":{"layout":"border","itemId":"viewport1"},"expanded":true,"children":[{"configs":{"itemId":"toolbar1","region":"north"},"expanded":true,"children":[{"configs":{"itemId":"addBtn","tooltip":"在当前选择节点下添加子节点","text":"添加节点"},"expanded":false,"children":[],"type":"item","events":{"click":"//基本的方法：\nvar newNode, selNode = app.tree1.getSelection()[0]; //获取选择的首个节点\nif (!selNode) {\n  Wb.warn('请选择1个节点。');\n} else if (selNode.isLeaf()) {\n  Wb.warn('该节点是叶子节点，无法添加新的子节点。');\n} else {\n  selNode.expand(false, function() { //在节点成功展开后添加新的子节点\n    newNode = selNode.appendChild({\n      text: '新建节点',\n      leaf: true, //设置为叶子节点\n      otherField: '其他字段值'\n    });\n    newNode.commit(); //确认添加\n    app.tree1.setSelection(newNode); //选择节点\n  });\n}\n//相关方法请参考Wb.append方法"}},{"configs":{"itemId":"insertBtn","tooltip":"在当前选择节点前插入节点","text":"插入节点"},"expanded":false,"children":[],"type":"item","events":{"click":"//基本的方法：\nvar newNode, selNode = app.tree1.getSelection()[0]; //获取选择的首个节点\nif (selNode && selNode.parentNode) {\n  selNode.expand(false, function() { //在节点成功展开后添加新的子节点\n    newNode = selNode.parentNode.insertBefore({\n      text: '新建节点',\n      leaf: true, //设置为叶子节点\n      otherField: '其他字段值'\n    }, selNode);\n    newNode.commit(); //确认添加\n    app.tree1.setSelection(newNode); //选择节点\n  });\n} else {\n  Wb.warn('请选择1个非根的节点。');\n}\n//相关方法请参考Wb.insertBefore/Wb.insertAfter"}},{"configs":{"itemId":"delBtn","tooltip":"删除选择的节点","text":"删除节点"},"expanded":false,"children":[],"type":"item","events":{"click":"var nodes = app.tree1.getSelection(); //获取选择的节点数组\nWb.each(nodes, function(node) {\n  node.remove(); //遍历节点数组并删除节点\n});\n//建议使用以下方法：\n// Wb.remove(app.tree1);"}},{"configs":{"itemId":"updateBtn","tooltip":"更新选择的节点相关字段值","text":"更新节点"},"expanded":false,"children":[],"type":"item","events":{"click":"var node = app.tree1.getSelection()[0]; //获取选择的首个节点\nif (node) {\n  node.set('text', '修改的值');\n  node.commit(); //确认修改\n} else {\n  Wb.warn('请选择1个节点。');\n}\n//建议使用以下方法：\n// Wb.update(node, {\n//   text: '修改的值',\n//   otherField: 'value'\n// });"}},{"configs":{"itemId":"selectBtn","tooltip":"获取首个选择节点的数据","text":"查询节点"},"expanded":false,"children":[],"type":"item","events":{"click":"var node = app.tree1.getSelection()[0];\nif (node) {\n  Wb.info(Wb.encode(node.data)); //node.data为记录的数据对象，node.data.fieldName(fieldName为字段名）可获取指定字段值\n} else {\n  Wb.warn('请选择1个节点。');\n}"}},{"configs":{"itemId":"reloadBtn","tooltip":"重新查询表格数据","text":"重新查询"},"expanded":false,"children":[],"type":"item","events":{"click":"//刷新选择节点的子节点数据可使用以下方法\nvar node = app.tree1.getSelection()[0];\nif (node) {\n  app.deptStore.load({\n    node: node,\n    params: Wb.apply({\n      paramName: 'paramValue'\n    }, node.data)\n  });\n} else {\n  Wb.warn('请选择1个节点。');\n}\n//刷新整个树使用Wb.reload(app.tree1);"}},{"configs":{"itemId":"refreshBtn","tooltip":"以快速高效的方式更新节点中的数据","text":"高性能更新"},"expanded":false,"children":[],"type":"item","events":{"click":"var index = 1;\napp.tree1.getRootNode().cascadeBy(function(node) {\n  node.data.text = 'node' + index++; //设置text属性值\n  node.data.otherField = 'value'; //设置其他属性值\n});\napp.tree1.view.refresh(); //刷新视图"}}],"type":"toolbar"},{"configs":{"itemId":"tree1","region":"center","rootVisible":"false"},"expanded":true,"children":[{"configs":{"itemId":"store","normalName":"deptStore","url":"m?xwl=examples/controls/tree/data-source/tree-select"},"expanded":false,"children":[],"type":"treestore","events":{"beforeload":"var node = operation.node;\noperation.params.parentDept = node.isRoot() ? -1 : operation.node.data.DEPT_ID;"}}],"type":"tree"}],"type":"viewport"}],"type":"module"}],"roles":{},"title":"增删改查","iconCls":"","inframe":false,"pageLink":""}