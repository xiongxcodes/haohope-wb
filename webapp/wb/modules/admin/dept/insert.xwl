{"hidden":false,"children":[{"configs":{"serverScript":"app.run('select 1 from WB_DEPT where DEPT_NAME={?DEPT_NAME?} and PARENT_DEPT={?PARENT_DEPT?}', {\n  errorText: '同级部门 \"' + app.get('DEPT_NAME') + '\" 已经存在。'\n});\nvar id = SysUtil.getId();\napp.set({\n  DEPT_ID: id\n});\n//更新索引\napp.run('update WB_DEPT set ORDER_INDEX=ORDER_INDEX+1 where PARENT_DEPT={?PARENT_DEPT?} and ORDER_INDEX>={?integer.ORDER_INDEX?}');\n//添加记录\napp.update({\n  tableName: 'WB_DEPT',\n  mode: 'insert'\n});\napp.output('select * from WB_DEPT where DEPT_ID={?DEPT_ID?}', {\n  type: 'object'\n});","itemId":"module"},"expanded":true,"children":[],"type":"module"}],"roles":{},"title":"添加","iconCls":"","inframe":false,"pageLink":""}