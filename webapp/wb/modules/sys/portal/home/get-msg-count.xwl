{"hidden":true,"children":[{"configs":{"itemId":"module","serverScript":"var rows = [];\n//获得im中的新消息数据\nrows.push(getAppInfo('im', getImCount()));\n//其他模块的新消息数量可上述代码添加\napp.send({\n  rows: rows\n});\n\n//获得im中的新消息数量\nfunction getImCount() {\n  var rs = app.run('select count(*) as \"CT\" from WB_IM where TO_USER={?sys.user?} and NOT_READ=1'),\n    ct = Wb.getRecords(rs)[0].CT;\n  return ct;\n}\n\n//获得指定url的title,icon信息\nfunction getAppInfo(url, msgCount) {\n  var info = Wb.reverse(WbUtil.getAppInfo(url, request));\n  info.msgCount = msgCount;\n  info.icon = FileUtil.getIconPath(info.iconCls);\n  delete info.iconCls;\n  return info;\n}"},"expanded":false,"children":[],"type":"module"}],"roles":{},"title":"获取新消息数量","iconCls":"","inframe":false,"pageLink":""}