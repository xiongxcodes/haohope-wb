{"hidden":true,"children":[{"configs":{"itemId":"module","serverScript":"var whereSql = '',\n  searchTitle = app.get('searchTitle'),\n  searchRange = app.get('searchRange');\n//搜索标题\nif (searchTitle) {\n  app.set({\n    searchTitle: '%' + searchTitle + '%'\n  });\n  whereSql += ' and a.TITLE like {?searchTitle?}';\n}\n//搜索全部主题、我发表的，我回复的标题\nif (searchRange == 'postItems')\n  whereSql += ' and a.CREATE_USER={?sys.user?}';\nelse if (searchRange == 'replyItems')\n  whereSql += ' and exists(select 1 from WB_BBS_POST d where d.TITLE_ID=a.TITLE_ID and d.POST_USER={?sys.user?})';\napp.set({\n  'whereSql': whereSql\n});"},"expanded":true,"children":[{"configs":{"itemId":"selectSql","default":"select \na.TITLE_ID,a.TITLE,a.SET_TOP,a.CREATE_DATE,a.MODIFY_DATE,a.VIEW_COUNT,a.REPLY_COUNT,\nb.DISPLAY_NAME as \"CREATE_DISP_USER\",c.DISPLAY_NAME as \"REPLY_DISP_USER\"\nfrom WB_BBS_TITLE a, WB_USER b, WB_USER c\nwhere a.CREATE_USER=b.USER_ID and a.REPLY_USER=c.USER_ID {#whereSql#}\norder by a.SET_TOP desc, a.MODIFY_DATE desc","oracle":"select t2.* from (\n  select ROWNUM as \"RN\",t1.* from (\n    select\n    a.TITLE_ID,a.TITLE,a.SET_TOP,a.CREATE_DATE,a.MODIFY_DATE,a.VIEW_COUNT,a.REPLY_COUNT,\n    b.DISPLAY_NAME as \"CREATE_DISP_USER\",c.DISPLAY_NAME as \"REPLY_DISP_USER\"\n    from WB_BBS_TITLE a, WB_USER b, WB_USER c\n    where a.CREATE_USER=b.USER_ID and a.REPLY_USER=c.USER_ID {#whereSql#}\n    order by a.SET_TOP desc, a.MODIFY_DATE desc\n  ) t1) t2\nwhere RN >= {?bigint.beginIndex?} and RN<={?bigint.endIndex?}\n","sqlserver":"select * from (\n  select row_number() over (order by a.SET_TOP desc, a.MODIFY_DATE desc) as \"RN\",\n  a.TITLE_ID,a.TITLE,a.SET_TOP,a.CREATE_DATE,a.MODIFY_DATE,a.VIEW_COUNT,a.REPLY_COUNT,\n  b.DISPLAY_NAME as \"CREATE_DISP_USER\",c.DISPLAY_NAME as \"REPLY_DISP_USER\"\n  from WB_BBS_TITLE a, WB_USER b, WB_USER c\n  where a.CREATE_USER=b.USER_ID and a.REPLY_USER=c.USER_ID {#whereSql#}\n) t\nwhere RN between {?bigint.beginIndex?} and {?bigint.endIndex?}\norder by SET_TOP desc, MODIFY_DATE desc","postgresql":"select a.TITLE_ID,a.TITLE,a.SET_TOP,a.CREATE_DATE,a.MODIFY_DATE,a.VIEW_COUNT,a.REPLY_COUNT,\nb.DISPLAY_NAME as \"CREATE_DISP_USER\",c.DISPLAY_NAME as \"REPLY_DISP_USER\"\nfrom WB_BBS_TITLE a, WB_USER b, WB_USER c\nwhere a.CREATE_USER=b.USER_ID and a.REPLY_USER=c.USER_ID {#whereSql#}\norder by a.SET_TOP desc, a.MODIFY_DATE desc\nlimit {?bigint.limit?} offset {?bigint.start?}\n","db2":"select * from (\n  select row_number() over (order by a.SET_TOP desc, a.MODIFY_DATE desc) as \"RN\",\n  a.TITLE_ID,a.TITLE,a.SET_TOP,a.CREATE_DATE,a.MODIFY_DATE,a.VIEW_COUNT,a.REPLY_COUNT,\n  b.DISPLAY_NAME as \"CREATE_DISP_USER\",c.DISPLAY_NAME as \"REPLY_DISP_USER\"\n  from WB_BBS_TITLE a, WB_USER b, WB_USER c\n  where a.CREATE_USER=b.USER_ID and a.REPLY_USER=c.USER_ID {#whereSql#}\n) t\nwhere RN between {?bigint.beginIndex?} and {?bigint.endIndex?}\norder by SET_TOP desc, MODIFY_DATE desc","mysql":"select a.TITLE_ID,a.TITLE,a.SET_TOP,a.CREATE_DATE,a.MODIFY_DATE,a.VIEW_COUNT,a.REPLY_COUNT,\nb.DISPLAY_NAME as \"CREATE_DISP_USER\",c.DISPLAY_NAME as \"REPLY_DISP_USER\"\nfrom WB_BBS_TITLE a, WB_USER b, WB_USER c\nwhere a.CREATE_USER=b.USER_ID and a.REPLY_USER=c.USER_ID {#whereSql#}\norder by a.SET_TOP desc, a.MODIFY_DATE desc\nlimit {?bigint.start?},{?bigint.limit?}\n"},"expanded":false,"children":[],"type":"sqlswitcher"},{"configs":{"itemId":"serverscript1","script":"app.output(app.get('selectSql'), {\n  autoPage: app.get('sql.autoPage'),\n  totalSql: 'select count(*) from WB_BBS_TITLE a where 1=1 ' + app.get('whereSql')\n});"},"expanded":false,"children":[],"type":"serverscript"}],"type":"module"}],"roles":{},"title":"查询主题","iconCls":"","inframe":false,"pageLink":""}