{"hidden":true,"children":[{"configs":{"serverScript":"Wb.apply(app, {\n  /**\n   * 添加或刷新字段缓存。\n   * @param {Boolean} isUpdate true更新，false添加。\n   */\n  refreshBuffer: function(isUpdate) {\n    var buffer = com.wb.common.Dictionary.buffer,\n      rs, tableName, fieldName, oldFieldName, tableBuffer;\n    rs = app.run('select * from WB_DICT where FIELD_ID=' + (isUpdate ? '{?#FIELD_ID?}' : '{?FIELD_ID?}'));\n    rs.next();\n    tableName = rs.getString('TABLE_NAME').toUpperCase();\n    fieldName = rs.getString('FIELD_NAME').toUpperCase();\n    tableBuffer = buffer.get(tableName);\n    if (!tableBuffer) {\n      tableBuffer = new java.util.concurrent.ConcurrentHashMap();\n      //buffer.put(tableName, tableBuffer);\n    }\n    if (isUpdate) {\n      //移去原缓存\n      tableBuffer.remove(request.getParameter('#FIELD_NAME'));\n    }\n    tableBuffer.put(fieldName, com.wb.common.Dictionary.getDictRecord(rs));\n    buffer.put(tableName, tableBuffer);\n  }\n});","itemId":"module","internalCall":"true"},"expanded":false,"children":[],"type":"module"}],"roles":{},"title":"刷新缓存","iconCls":"","inframe":false,"pageLink":""}