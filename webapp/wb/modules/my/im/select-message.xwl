{"hidden":false,"children":[{"configs":{"itemId":"module","serverScript":"var sql, searchSql, searchText = app.get('searchText');\n\nif (Wb.isEmpty(searchText))\n  searchSql = '';\nelse {\n  app.set('searchText', '%' + searchText + '%');\n  searchSql = 'and TEXT_CONTENT like {?searchText?} ';\n}\nsql = 'select IM_ID,SEND_DATE,case when FROM_USER={?sys.user?} then 1 else 0 end \"FROM_ME\",TEXT_CONTENT from WB_IM ' +\n  'where (IM_ID < {?lastRecId?} or {?lastRecId?} is null) ' +\n  'and ((FROM_USER={?sys.user?} and TO_USER={?userId?}) or (FROM_USER={?userId?} and TO_USER={?sys.user?})) ' +\n  searchSql +\n  'order by IM_ID desc';\napp.output(sql);"},"expanded":true,"children":[{"configs":{"itemId":"dataprovider1","limitRecords":"100","sql":"select IM_ID,SEND_DATE,case when FROM_USER={?sys.user?} then 1 else 0 end \"FROM_ME\",TEXT_CONTENT from WB_IM\nwhere (IM_ID < {?lastRecId?} or {?lastRecId?} is null)\nand ((FROM_USER={?sys.user?} and TO_USER={?userId?}) or (FROM_USER={?userId?} and TO_USER={?sys.user?}))\norder by IM_ID desc"},"expanded":false,"children":[],"type":"dataprovider"}],"type":"module"}],"roles":{},"title":"查询消息","iconCls":"","inframe":false,"pageLink":""}