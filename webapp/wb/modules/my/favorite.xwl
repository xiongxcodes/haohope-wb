{"hidden":false,"children":[{"configs":{"itemId":"module"},"expanded":true,"children":[{"configs":{"layout":"fit","itemId":"viewport1"},"expanded":true,"children":[{"configs":{"border":"false","itemId":"grid1","pagingBar":"false","viewConfig":"{\n  plugins: {\n    ptype: 'gridviewdragdrop',\n    ddGroup: 'sys.favorite'\n  },\n  listeners: {\n    drop: app.dropHandler\n  }\n}","hideHeaders":"true"},"expanded":true,"children":[{"configs":{"itemId":"store","normalName":"gridStore","autoLoad":"true","fields":"['title', 'iconCls', 'url', 'type', 'item']","url":"m?xwl=my/favorite/select"},"expanded":false,"children":[],"type":"store"},{"configs":{"itemId":"columns"},"expanded":true,"children":[{"configs":{"itemId":"column1","renderer":"return Wb.getIcon(record.data.iconCls) + '<span dtype=\"link\" class=\"wb_xlink\">' + value + '<\/span>';","flex":"1","dataIndex":"title"},"expanded":false,"children":[],"type":"column"},{"configs":{"itemId":"actionColumns","xtype":"actioncolumn","width":"50","align":"center"},"expanded":true,"children":[{"configs":{"itemId":"items"},"expanded":true,"children":[{"configs":{"itemId":"delAction","handler":"Wb.request({\n  url: 'm?xwl=my/favorite/page-remove',\n  params: {\n    index: rowIndex\n  },\n  success: function() {\n    Wb.remove(app.grid1, record);\n  }\n});","tooltip":"@Str.del","iconCls":"wb_over_hidden delete_icon"},"expanded":false,"children":[],"type":"column"}],"type":"array"}],"type":"column"}],"type":"array"}],"type":"grid","events":{"itemclick":"if (Ext.fly(e.target).getAttribute('dtype') == 'link')\n  app.openModule(index);"}}],"type":"viewport"}],"type":"module","events":{"initialize":"Wb.apply(app, {\n  openModule: function(rowIndex) {\n    var config, rec = app.grid1.store.getAt(rowIndex);\n    if (rec.data.type != 'error') {\n      config = Wb.apply({}, rec.data);\n      if (Ext.String.endsWith(config.url, '.xwl'))\n        config.url = 'm?xwl=' + config.url.slice(0, -4);\n      Wb.open(config);\n    }\n  },\n  //接受广播的句柄方法\n  xSysFavoriteAdd: function(data) {\n    if (app.gridStore.findExact('item', data.item) == -1)\n      app.gridStore.add(data);\n  },\n  //拖放句柄\n  dropHandler: function() {\n    Wb.request({\n      url: 'm?xwl=my/favorite/page-sort',\n      params: {\n        grid: Wb.pluck(app.gridStore.getRange(), 'item')\n      }\n    });\n  }\n});"}}],"roles":{},"title":"我的收藏","iconCls":"star_icon","inframe":false,"pageLink":""}