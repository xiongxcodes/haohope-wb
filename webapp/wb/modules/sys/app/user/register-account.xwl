{"hidden":true,"children":[{"configs":{"itemId":"module","loginRequired":"false"},"expanded":true,"children":[{"configs":{"itemId":"userNameControl","file":"m?xwl=sys/app/user/username-control"},"expanded":false,"children":[],"type":"xwl"},{"configs":{"itemId":"win","focusControl":"USER_NAME","editWin":"true","width":"450","layoutType":"anchorForm","iconCls":"registration_icon","title":"注册登录帐户"},"expanded":true,"children":[{"configs":{"itemId":"USER_NAME","headerScript":"Wb.apply(app.userNameControl.USER_NAME, {\n  appScope: app\n}),"},"expanded":false,"children":[],"type":"clientscript"},{"configs":{"itemId":"DISPLAY_NAME","allowBlank":"false","fieldLabel":"昵称"},"expanded":false,"children":[],"type":"text"},{"configs":{"itemId":"PASSWORD","allowBlank":"false","fieldLabel":"密码","minLength":"6","inputType":"password"},"expanded":false,"children":[],"type":"text"},{"configs":{"itemId":"RE_PASSWORD","allowBlank":"false","fieldLabel":"密码确认","minLength":"6","inputType":"password"},"expanded":false,"children":[],"type":"text"},{"configs":{"itemId":"EMAIL","allowBlank":"false","vtype":"email","fieldLabel":"电子邮件"},"expanded":false,"children":[],"type":"text"},{"configs":{"layout":"hbox","itemId":"verifyContainer","allowBlank":"false","fieldLabel":"验证码"},"expanded":true,"children":[{"configs":{"allowBlank":"false","itemId":"verifyCode","flex":"1"},"expanded":false,"children":[],"type":"text"},{"configs":{"itemId":"verifyImage","margin":"0 0 0 5","alt":"验证码","width":"90","style":"cursor:pointer;","title":"点击更换验证码","height":"Wb.getDefaultHeight()"},"expanded":false,"children":[],"type":"image","events":{"click":"app.changeVC();\napp.verifyCode.reset();\napp.verifyCode.focus(true, true);"}}],"type":"fieldcontainer"}],"type":"window","events":{"show":"app.changeVC();","ok":"if (app.PASSWORD.getValue() != app.RE_PASSWORD.getValue()) {\n  Wb.warn('两次密码输入不一致，请确认后再试一次。', function() {\n    app.PASSWORD.focus(true, true);\n  });\n  return;\n}\nvar params = Wb.getValue(win);\nWb.request({\n  url: 'm?xwl=sys/app/user/do-register',\n  params: params,\n  failure: function() {\n    app.verifyCode.reset();\n    app.changeVC();\n  },\n  success: function() {\n    Ext.callback(app.callback, app, [params, win]);\n  }\n});"}}],"type":"module","events":{"initialize":"Wb.apply(app, {\n  changeVC: function() {\n    app.verifyImage.setSrc('m?xwl=sys/session/get-verify-image&key=register&' + Wb.getId());\n  },\n  /**\n   * 显示用户帐户注册对话框。\n   * @param {Function} callback 注册成功之后的回调函数。\n   * @param {Object} callback.data 注册的数据对象。\n   * @param {Ext.window.Window} callback.win 窗口对象。\n   */\n  show: function(callback, params) {\n    app.callback = callback;\n    app.win.show();\n  }\n});"}}],"roles":{"default":1},"title":"注册用户帐户","iconCls":"","inframe":false,"pageLink":""}