{"hidden":false,"children":[{"configs":{"itemId":"module","importModules":"[\"m?xwl=examples/templates/employee/public/common-methods\"]"},"expanded":true,"children":[{"configs":{"itemId":"editWin","focusControl":"EMPLOYEE_CODE","editWin":"true","width":"576","layoutType":"anchorForm"},"expanded":true,"children":[{"configs":{"allowBlank":"false","itemId":"EMPLOYEE_CODE","fieldLabel":"员工编号"},"expanded":false,"children":[],"type":"text"},{"configs":{"allowBlank":"false","itemId":"REAL_NAME","fieldLabel":"姓名"},"expanded":false,"children":[],"type":"text"},{"configs":{"allowBlank":"false","itemId":"BIRTH_DATE","fieldLabel":"出生日期"},"expanded":false,"children":[],"type":"date"},{"configs":{"allowBlank":"false","itemId":"SEX","fieldLabel":"性别","keyName":"sex"},"expanded":false,"children":[],"type":"combo"},{"configs":{"itemId":"NATION","fieldLabel":"民族","keyName":"nation"},"expanded":false,"children":[],"type":"combo"},{"configs":{"itemId":"EMAIL","vtype":"email","fieldLabel":"电子邮件"},"expanded":false,"children":[],"type":"text"},{"configs":{"itemId":"VACATION_HOURS","minValue":"0","fieldLabel":"休假时长"},"expanded":false,"children":[],"type":"number"},{"configs":{"itemId":"COMPANY_NAME","bindField":"COMPANY_ID","fieldLabel":"负责公司","displayField":"COMPANY_NAME"},"expanded":true,"children":[{"configs":{"itemId":"store","url":"m?xwl=examples/templates/employee/edit/company-list"},"expanded":false,"children":[],"type":"store"}],"type":"combo"},{"configs":{"layout":"fit","itemId":"fieldset1","padding":"8","title":"备注："},"expanded":true,"children":[{"configs":{"itemId":"REMARK"},"expanded":false,"children":[],"type":"textarea"}],"type":"fieldset"}],"type":"window","events":{"ok":"var values = Wb.getValue(app.editWin);\nif (app.isEdit) {\n  //点击修改按钮的处理过程\n  Wb.request({\n    url: 'm?xwl=examples/templates/employee/dialog/update',\n    params: Wb.applyIf(values, Wb.getData(app.selRec, true)), //合并窗口和记录数据作为参数，后者为默认值\n    success: function() {\n      //把窗口数据更新到选择记录中\n      Wb.update(app.selRec, values);\n      //隐藏对话框，在模块关闭时自动销毁对话框\n      app.editWin.close();\n    }\n  });\n} else {\n  //点击添加按钮的处理过程\n  Wb.request({\n    url: 'm?xwl=examples/templates/employee/dialog/insert',\n    out: app.editWin,\n    params: {\n      DEPT_ID: app.selDept.data.DEPT_ID\n    },\n    success: function(resp) {\n      //把服务器返回的数据合并窗口数据（公司名称等数据）添加到表格中\n      Wb.add(app.grid1, Wb.apply(Wb.decode(resp.responseText), values));\n      //隐藏对话框，在模块关闭时自动销毁对话框\n      app.editWin.close();\n    }\n  });\n}"}},{"configs":{"layout":"border","itemId":"viewport1"},"expanded":true,"children":[{"configs":{"itemId":"toolbar1","region":"north"},"expanded":true,"children":[{"configs":{"itemId":"newBtn","tooltip":"添加新的记录 (Ctrl+E)","text":"添加","iconCls":"record_add_icon"},"expanded":false,"children":[],"type":"item","events":{"click":"if (!app.selDept) {\n  Wb.warn('部门未选择。');\n  return;\n}\napp.editWin.show();\napp.editWin.setTitle('添加 - ' + app.selDept.data.DEPT_NAME);\napp.editWin.setIconCls('record_add_icon');\napp.isEdit = false; //标识是否为添加或修改状态，在editWin的ok事件中用到此属性"}},{"configs":{"itemId":"editBtn","tooltip":"修改选择的记录","text":"修改","iconCls":"record_edit_icon"},"expanded":false,"children":[],"type":"item","events":{"click":"var sels = app.grid1.getSelection();\nif (sels.length != 1) {\n  Wb.warn('请选择 1 条需要修改的记录。');\n  return;\n}\napp.selRec = sels[0];\napp.editWin.show();\napp.editWin.setTitle('修改 - ' + app.selRec.data.REAL_NAME);\napp.editWin.setIconCls('record_edit_icon');\nWb.setValue(app.editWin, app.selRec.data);\napp.isEdit = true; //标识是否为添加或修改状态，在editWin的ok事件中用到此属性"}},{"configs":{"itemId":"delBtn","tooltip":"删除选择的记录","text":"删除","iconCls":"record_delete_icon"},"expanded":false,"children":[],"type":"item","events":{"click":"var sels = app.grid1.getSelection();\nWb.confirmDo(sels, function() {\n  Wb.request({\n    url: 'm?xwl=examples/templates/employee/dialog/delete',\n    params: {\n      destroy: Wb.getData(sels, true)\n    },\n    success: function() {\n      Wb.remove(app.grid1, sels);\n    }\n  });\n}, 'REAL_NAME');"}},{"configs":{"itemId":"item1","text":"-"},"expanded":false,"children":[],"type":"item"},{"configs":{"itemId":"searchCombo","onTriggerClick":"this.collapse();\napp.grid1.store.load({\n  out: app.toolbar1 //toolbar1内的所有控件值作为参数列表\n});","emptyText":"姓名","triggerCls":"x-form-search-trigger","width":"130","displayField":"REAL_NAME","enterKeyTriggerClick":"true"},"expanded":true,"children":[{"configs":{"itemId":"store","url":"m?xwl=examples/templates/employee/edit/search"},"expanded":false,"children":[],"type":"store"}],"type":"combo","events":{"select":"Ext.callback(combo.onTriggerClick, combo);"}},{"configs":{"itemId":"resetSearchBtn","tooltip":"重置搜索结果","text":"重置搜索","iconCls":"undo_icon"},"expanded":false,"children":[],"type":"item","events":{"click":"app.loadData();"}}],"type":"toolbar"},{"configs":{"itemId":"deptTree","file":"m?xwl=examples/templates/employee/public/dept-tree"},"expanded":false,"children":[],"type":"xwl"},{"configs":{"itemId":"grid1","viewConfig":"{\n  plugins: {\n    ptype: 'gridviewdragdrop',\n    ddGroup: 'dept',\n    enableDrop: false\n  }\n}","region":"center","multiSelect":"true"},"expanded":true,"children":[{"configs":{"itemId":"store","remoteSort":"true","sorters":"'EMPLOYEE_CODE'","url":"m?xwl=examples/templates/employee/edit/select"},"expanded":false,"children":[],"type":"store"},{"configs":{"itemId":"columns"},"expanded":true,"children":[{"configs":{"itemId":"numCol","xtype":"rownumberer"},"expanded":false,"children":[],"type":"column"},{"configs":{"itemId":"employeeCodeCol","dataIndex":"EMPLOYEE_CODE","width":"80","text":"员工编号"},"expanded":false,"children":[],"type":"column"},{"configs":{"itemId":"realNameCol","dataIndex":"REAL_NAME","width":"150","text":"姓名"},"expanded":false,"children":[],"type":"column"},{"configs":{"itemId":"birthDateCol","dataIndex":"BIRTH_DATE","width":"100","text":"出生日期"},"expanded":false,"children":[],"type":"column"},{"configs":{"itemId":"sexCol","dataIndex":"SEX","keyName":"sex","width":"50","text":"性别"},"expanded":false,"children":[],"type":"column"},{"configs":{"itemId":"nationCol","dataIndex":"NATION","keyName":"nation","width":"90","text":"民族"},"expanded":false,"children":[],"type":"column"},{"configs":{"itemId":"emailCol","dataIndex":"EMAIL","width":"150","text":"电子邮件"},"expanded":false,"children":[],"type":"column"},{"configs":{"itemId":"vacationHoursCol","dataIndex":"VACATION_HOURS","width":"70","format":"#,##0","text":"休假时长","align":"right"},"expanded":false,"children":[],"type":"column"},{"configs":{"itemId":"companyNAMECol","dataIndex":"COMPANY_NAME","flex":"1","minWidth":"130","text":"负责公司","maxWidth":"200"},"expanded":false,"children":[],"type":"column"},{"configs":{"itemId":"remarkCol","dataIndex":"REMARK","flex":"1","text":"备注"},"expanded":false,"children":[],"type":"column"}],"type":"array"}],"type":"grid","events":{"itemdblclick":"app.editBtn.fireEvent('click');"}}],"type":"viewport","events":{"afterrender":"app.afterRender();"}}],"type":"module"}],"roles":{},"title":"对话框","iconCls":"","inframe":false,"pageLink":""}