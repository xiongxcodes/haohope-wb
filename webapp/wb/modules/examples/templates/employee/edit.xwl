{"hidden":false,"children":[{"configs":{"itemId":"module","importModules":"[\"m?xwl=examples/templates/employee/public/common-methods\"]"},"expanded":true,"children":[{"configs":{"layout":"border","itemId":"viewport1"},"expanded":true,"children":[{"configs":{"itemId":"toolbar1","region":"north"},"expanded":true,"children":[{"configs":{"itemId":"newBtn","tooltip":"添加新的记录 (Ctrl+E)","text":"添加","iconCls":"record_add_icon"},"expanded":false,"children":[],"type":"item","events":{"click":"if (!app.selDept) {\n  Wb.warn('部门未选择。');\n  return;\n}\nWb.addEdit(app.grid1, {\n  DEPT_ID: app.selDept.data.DEPT_ID\n});"}},{"configs":{"itemId":"delBtn","tooltip":"删除选择的记录","text":"删除","iconCls":"record_delete_icon"},"expanded":false,"children":[],"type":"item","events":{"click":"Wb.remove(app.grid1);"}},{"configs":{"itemId":"item1","text":"-"},"expanded":false,"children":[],"type":"item"},{"configs":{"itemId":"saveBtn","tooltip":"保存所有的更改 (Ctrl+S)","text":"保存","iconCls":"save_icon"},"expanded":false,"children":[],"type":"item","events":{"click":"if (!Wb.verifyGrid(app.grid1))\n  return;\nWb.sync({\n  grid: app.grid1,\n  url: 'm?xwl=examples/templates/employee/edit/save',\n  message: '正在保存中...',\n  success: function(resp) {\n    Wb.syncCreate(app.grid1, Wb.decode(resp.responseText));\n    app.unModified();\n  },\n  failure: function(resp) {\n    //可以根据后台返回的错误重置错误信息\n    if (resp.responseText.indexOf('WB_EMPLOYEE_EMPLOYEE_CODE') != -1) {\n      Wb.error('员工编号重复。');\n    }\n  }\n});"}},{"configs":{"itemId":"rejectBtn","tooltip":"放弃自上次保存以来所有的更改","text":"放弃","iconCls":"table_delete_icon"},"expanded":false,"children":[],"type":"item","events":{"click":"Wb.confirm('确定要放弃对表格的所有更改吗？', function() {\n  app.grid1.store.rejectChanges();\n  app.unModified();\n});"}},{"configs":{"itemId":"item2","text":"-"},"expanded":false,"children":[],"type":"item"},{"configs":{"itemId":"searchCombo","onTriggerClick":"this.collapse();\napp.grid1.store.load({\n  out: app.toolbar1 //toolbar1内的所有控件值作为参数列表\n});","emptyText":"姓名","triggerCls":"x-form-search-trigger","width":"150","displayField":"REAL_NAME","enterKeyTriggerClick":"true"},"expanded":true,"children":[{"configs":{"itemId":"store","url":"m?xwl=examples/templates/employee/edit/search"},"expanded":false,"children":[],"type":"store"}],"type":"combo","events":{"select":"Ext.callback(combo.onTriggerClick, combo);"}},{"configs":{"itemId":"resetSearchBtn","tooltip":"重置搜索结果","text":"重置搜索","iconCls":"undo_icon"},"expanded":false,"children":[],"type":"item","events":{"click":"app.loadData();"}}],"type":"toolbar"},{"configs":{"itemId":"deptTree","file":"m?xwl=examples/templates/employee/public/dept-tree"},"expanded":false,"children":[],"type":"xwl"},{"configs":{"itemId":"grid1","editable":"true","viewConfig":"{\n  plugins: {\n    ptype: 'gridviewdragdrop',\n    ddGroup: 'dept',\n    enableDrop: false\n  }\n}","region":"center","multiSelect":"true"},"expanded":true,"children":[{"configs":{"itemId":"store","remoteSort":"true","sorters":"'EMPLOYEE_CODE'","url":"m?xwl=examples/templates/employee/edit/select"},"expanded":false,"children":[],"type":"store","events":{"load":"Wb.bindChange(app.grid1, app.setModified);"}},{"configs":{"itemId":"columns"},"expanded":true,"children":[{"configs":{"itemId":"numCol","xtype":"rownumberer"},"expanded":false,"children":[],"type":"column"},{"configs":{"itemId":"employeeCodeCol","dataIndex":"EMPLOYEE_CODE","width":"80","text":"员工编号"},"expanded":true,"children":[{"configs":{"allowBlank":"false","itemId":"editor"},"expanded":false,"children":[],"type":"text"}],"type":"column"},{"configs":{"itemId":"realNameCol","dataIndex":"REAL_NAME","width":"120","text":"姓名"},"expanded":true,"children":[{"configs":{"allowBlank":"false","itemId":"editor"},"expanded":false,"children":[],"type":"text"}],"type":"column"},{"configs":{"itemId":"birthDateCol","dataIndex":"BIRTH_DATE","width":"100","text":"出生日期"},"expanded":true,"children":[{"configs":{"allowBlank":"false","itemId":"editor"},"expanded":false,"children":[],"type":"date"}],"type":"column"},{"configs":{"itemId":"sexCol","dataIndex":"SEX","keyName":"sex","width":"60","text":"性别"},"expanded":true,"children":[{"configs":{"allowBlank":"false","itemId":"editor","keyName":"sex"},"expanded":false,"children":[],"type":"combo"}],"type":"column"},{"configs":{"itemId":"nationCol","dataIndex":"NATION","keyName":"nation","width":"90","text":"民族"},"expanded":true,"children":[{"configs":{"itemId":"editor","keyName":"nation"},"expanded":false,"children":[],"type":"combo"}],"type":"column"},{"configs":{"itemId":"emailCol","dataIndex":"EMAIL","width":"150","text":"电子邮件"},"expanded":true,"children":[{"configs":{"itemId":"editor","vtype":"email"},"expanded":false,"children":[],"type":"text"}],"type":"column"},{"configs":{"itemId":"vacationHoursCol","dataIndex":"VACATION_HOURS","width":"70","format":"#,##0","text":"休假时长","align":"right"},"expanded":true,"children":[{"configs":{"itemId":"editor","minValue":"0"},"expanded":false,"children":[],"type":"number"}],"type":"column"},{"configs":{"itemId":"companyNameCol","dataIndex":"COMPANY_NAME","flex":"1","minWidth":"130","text":"负责公司","maxWidth":"200"},"expanded":true,"children":[{"configs":{"itemId":"editor","bindField":"COMPANY_ID","displayField":"COMPANY_NAME","listConfig":"{\n  minWidth: 200\n}"},"expanded":true,"children":[{"configs":{"itemId":"store","url":"m?xwl=examples/templates/employee/edit/company-list"},"expanded":false,"children":[],"type":"store"}],"type":"combo"}],"type":"column"},{"configs":{"itemId":"remarkCol","dataIndex":"REMARK","flex":"1","text":"备注"},"expanded":true,"children":[{"configs":{"itemId":"editor","height":"80"},"expanded":false,"children":[],"type":"textarea"}],"type":"column"}],"type":"array"}],"type":"grid"}],"type":"viewport","events":{"afterrender":"app.afterRender();"}}],"type":"module","events":{"beforeunload":"if (app.isModified)\n  return '可编辑表格示例数据已经被更改';"}}],"roles":{},"title":"可编辑表格","iconCls":"","inframe":false,"pageLink":""}