{"hidden":false,"children":[{"configs":{"itemId":"module"},"expanded":true,"children":[{"configs":{"layout":"border","itemId":"viewport1"},"expanded":true,"children":[{"configs":{"itemId":"mainBar","region":"north"},"expanded":true,"children":[{"configs":{"itemId":"newBtn","tooltip":"添加新的记录 (Ctrl+E)","text":"添加","iconCls":"record_add_icon"},"expanded":false,"children":[],"type":"item","events":{"click":"Wb.addEdit(app.grid1);"}},{"configs":{"itemId":"delBtn","tooltip":"删除选择的记录","text":"删除","iconCls":"record_delete_icon"},"expanded":false,"children":[],"type":"item","events":{"click":"Wb.remove(app.grid1);"}},{"configs":{"itemId":"item1","text":"-"},"expanded":false,"children":[],"type":"item"},{"configs":{"itemId":"saveBtn","tooltip":"保存所有的更改 (Ctrl+S)","disabled":"true","text":"保存","iconCls":"save_icon"},"expanded":false,"children":[],"type":"item","events":{"click":"app.save();"}},{"configs":{"itemId":"line1","text":"-"},"expanded":false,"children":[],"type":"item"},{"configs":{"itemId":"searchCombo","tpl":"<table cellspacing='0' width='100%'>\n  <tpl for='.'>\n    <tr class='x-boundlist-item'>\n      <td width='50px'>\n        {{#codeField#}}\n      <\/td>\n      <td>\n        {{#nameField#}}\n      <\/td>\n    <\/tr>\n  <\/tpl>\n<\/table>","onTriggerClick":"this.collapse();\napp.mainStore.load({\n  out: app.mainBar\n});","emptyText":"编号或名称","triggerCls":"x-form-search-trigger","width":"180","displayField":"{#searchKeyField#}","enterKeyTriggerClick":"true"},"expanded":true,"children":[{"configs":{"itemId":"store","normalName":"searchStore","url":"{#searchUrl#}"},"expanded":false,"children":[],"type":"store"}],"type":"combo","events":{"select":"Ext.callback(combo.onTriggerClick, combo);"}},{"configs":{"itemId":"resetSearchBtn","tooltip":"重置搜索结果","text":"重置搜索","iconCls":"undo_icon"},"expanded":false,"children":[],"type":"item","events":{"click":"app.mainStore.load();"}}],"type":"toolbar"},{"configs":{"itemId":"grid1","editable":"true","region":"center","multiSelect":"true"},"expanded":true,"children":[{"configs":{"itemId":"store","remoteSort":"true","normalName":"mainStore","autoLoad":"true","url":"{#selectUrl#}"},"expanded":false,"children":[],"type":"store","events":{"load":"Wb.bindChange(app.grid1, app.setModified);\napp.saveBtn.setDisabled(true);","beforeload":"var store = this;\nif (app.isModified) {\n  Wb.choose('表格已经被修改，保存所做的更改吗？',\n    function(btn) {\n      if (btn == 'yes')\n        app.save(function() {\n          store.reload();\n        });\n      else if (btn == 'no') {\n        app.unModified();\n        store.reload();\n      }\n    });\n  return false;\n}"}}],"type":"grid"}],"type":"viewport","events":{"afterrender":"app.navKey = new Ext.KeyNav({\n  viewport: app.viewport1,\n  E: {\n    ctrl: true,\n    fn: function() {\n      app.newBtn.fireEvent('click');\n    }\n  },\n  S: {\n    ctrl: true,\n    fn: function() {\n      app.saveBtn.fireEvent('click');\n    }\n  }\n});"}}],"type":"module","events":{"beforeunload":"if (app.isModified)\n  return '表格已经被修改。';","initialize":"//公共方法和属性定义\nWb.apply(app, {\n  /**\n   * 设置表格已经被修改。\n   */\n  setModified: function() {\n    app.doSetModified(true);\n  },\n  /**\n   * 设置表格未被修改。\n   */\n  unModified: function() {\n    app.doSetModified(false);\n  },\n  /**\n   * 设置表格是否已经被修改。\n   * @param {Boolean} isModified 是否被修改，true修改，false未修改。\n   */\n  doSetModified: function(isModified) {\n    app.isModified = isModified;\n    app.saveBtn.setDisabled(!isModified);\n  },\n  /**\n   * 保存表格数据。使用该方法将同步表格中的数据到后台。\n   * @param {Function} [callback] 保存完成后执行的方法。\n   */\n  save: function(callback) {\n    if (!Wb.verifyGrid(app.grid1))\n      return;\n    Wb.sync({\n      grid: app.grid1,\n      autoUpdate: true,\n      url: '{#saveUrl#}',\n      success: function(resp) {\n        app.unModified();\n        Ext.callback(callback);\n      }\n    });\n  }\n});"}}],"roles":{"demo":1},"title":"{#title#}","iconCls":"{#iconCls#}","inframe":false,"pageLink":""}