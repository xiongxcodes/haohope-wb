{"hidden":true,"children":[{"configs":{"itemId":"sys.home","serverScript":"com.wb.interact.Portal.initHome(request, response);\n//根据新消息数量，生成Badge提示\nvar msgCount = 0,\n  msgs = Wb.decode(Wb.execute('m?xwl=sys/portal/home/get-msg-count', {\n    'sys.user': app.get('sys.user')\n  }));\nWb.each(msgs.rows, function(rec) {\n  msgCount += rec.msgCount;\n});\napp.set('badgeHtml', '<span itemId=\"badgeBtn\" class=\"wb_badge1\"' + (msgCount ? '' : ' style=\"display:none;') +\n  '\">' + (msgCount ? msgCount : '') + '<\/span>');\napp.set('msgCount', msgCount);\napp.set('treeNodes', com.wb.interact.Portal.getAppListText(request)); //使用同步方式在页面加载时加载树","logMessage":"主页","cssLinks":"[\"wb/css/home{#debugSuffix#}.css\"]","title":"{#Var.sys.app.title#}"},"expanded":true,"children":[{"configs":{"itemId":"notifySocket","name":"sys.home"},"expanded":false,"children":[],"type":"socket","events":{"onopen":"app.showReconnectBtn(false);","success":"if (!data)\n  return;\nvar object = Wb.decode(data);\nif (object.cate == 'console')\n  app.getConsoleInfo(object);\nelse\n  app.getNotifyInfo(object);","onclose":"app.showReconnectBtn(true);"}},{"configs":{"border":"false","itemId":"notifyMenu","createInstance":"false"},"expanded":false,"children":[{"configs":{"itemId":"notifyView","badgeFieldName":"msgCount","tplDisplay":"{title}","style":"background:white;","minWidth":"200","tplIcon":"{icon}","maxWidth":"400"},"expanded":false,"children":[{"configs":{"itemId":"store","normalName":"notifyStore","fields":"['url', 'msgCount', 'title', 'icon']","url":"m?xwl=sys/portal/home/get-msg-count"},"expanded":false,"children":[],"type":"store"}],"type":"dataview","events":{"itemclick":"Wb.open(Ext.copyTo({}, record.data, 'title,icon,url'));\napp.showBadgeCount(-record.data.msgCount);\napp.notifyMenu.hide();"}}],"type":"menu"},{"configs":{"itemId":"mainMenu"},"expanded":true,"children":[{"configs":{"itemId":"buttongroup1","defaults":"{\n  padding: 5\n}","columns":"4"},"expanded":true,"children":[{"configs":{"itemId":"backBtn","glyph":"f060","tooltip":"@Str.back"},"expanded":false,"children":[],"type":"item"},{"configs":{"itemId":"forwardBtn","glyph":"f061","tooltip":"@Str.forward"},"expanded":false,"children":[],"type":"item"},{"configs":{"itemId":"homeBtn","glyph":"f015","tooltip":"@Str.home"},"expanded":false,"children":[],"type":"item","events":{"click":"app.tab.setActiveTab(app.homeCard);"}},{"configs":{"itemId":"refreshPageBtn","glyph":"f021","tooltip":"@Str.refreshPage"},"expanded":false,"children":[],"type":"item","events":{"click":"var card = app.tab.getActiveTab();\nif (card) {\n  if (card == app.homeCard) {\n    Wb.each(app.homeCard.query('portlet'), function(portlet) {\n      app.refreshPortlet(portlet);\n    });\n  } else {\n    Wb.open({\n      reloadCard: card\n    });\n  }\n}"}},{"configs":{"itemId":"findModuleBtn","glyph":"f002","tooltip":"@Str.find"},"expanded":false,"children":[],"type":"item","events":{"click":"var isTree = app.moduleView.getLayout().getActiveItem() == app.tree;\napp.moduleView.show();\nif (!isTree)\n  app.moduleView.getLayout().setActiveItem(app.treeView);\napp.searchBar.setVisible(isTree ? app.searchBar.hidden : true);\nif (app.searchBar.isVisible())\n  app.findCombo.focus(false, true);"}},{"configs":{"itemId":"refreshAppsBtn","glyph":"f18e","tooltip":"@Str.refreshApps"},"expanded":false,"children":[],"type":"item","events":{"click":"Wb.reload(app.tree);"}},{"configs":{"itemId":"hideView","glyph":"f00b","tooltip":"@Str.toggleView"},"expanded":false,"children":[],"type":"item","events":{"click":"app.moduleView.setVisible(!app.moduleView.isVisible());"}},{"configs":{"itemId":"hideNavIcon","glyph":"f009","tooltip":"@Str.toggleNavIcon"},"expanded":false,"children":[],"type":"item","events":{"click":"app.moduleView.show();\nif (app.moduleView.getLayout().getActiveItem() == app.cardComp) {\n  app.navIconBar.setVisible(!app.navIconBar.isVisible());\n} else {\n  app.moduleView.getLayout().setActiveItem(2);\n  app.navIconBar.setVisible(true);\n}\napp.cardStatusMap = {};\napp.createCardView();"}}],"type":"buttongroup"},{"configs":{"itemId":"line1","text":"-"},"expanded":false,"children":[],"type":"item"},{"configs":{"itemId":"closeCurrentItem","text":"@Str.close"},"expanded":false,"children":[],"type":"item","events":{"click":"if (app.homeCard.isVisible())\n  app.closePortal();\nelse\n  Wb.close();"}},{"configs":{"itemId":"closeOthersItem","text":"@Str.closeOthers"},"expanded":false,"children":[],"type":"item","events":{"click":"Wb.close(false);"}},{"configs":{"itemId":"closeAppsItem","text":"@Str.closeApps"},"expanded":false,"children":[],"type":"item","events":{"click":"Wb.close(true);"}},{"configs":{"itemId":"closeAllItem","text":"@Str.closeAll"},"expanded":false,"children":[],"type":"item","events":{"click":"Ext.suspendLayouts();\nWb.close(true);\napp.closePortal();\nExt.resumeLayouts(true);"}},{"configs":{"itemId":"line2","text":"-"},"expanded":false,"children":[],"type":"item"},{"configs":{"itemId":"viewStyleMenu","text":"@Str.moduleView"},"expanded":false,"children":[{"configs":{"itemId":"viewStyle0","glyph":"f00b","checked":"false","text":"@Str.treeView","group":"viewStyle"},"expanded":false,"children":[],"type":"item"},{"configs":{"itemId":"viewStyle1","glyph":"f009","checked":"false","text":"@Str.listView","group":"viewStyle"},"expanded":false,"children":[],"type":"item"},{"configs":{"itemId":"viewStyle2","glyph":"f039","checked":"false","text":"@Str.cardView","group":"viewStyle"},"expanded":false,"children":[],"type":"item"}],"type":"item","events":{"menuonshow":"app['viewStyle' + app.moduleView.items.indexOf(app.moduleView.getLayout().getActiveItem())].setChecked(true);","menuclick":"app.moduleView.show();\napp.moduleView.getLayout().setActiveItem(app.viewStyleMenu.menu.items.indexOf(item));"}},{"configs":{"itemId":"themeMenu","text":"@Str.theme"},"expanded":false,"children":[{"configs":{"itemId":"classicItem","checked":"true","text":"@Str.classic","group":"theme"},"expanded":true,"children":[],"type":"item"},{"configs":{"itemId":"grayItem","checked":"false","text":"@Str.gray","group":"theme"},"expanded":false,"children":[],"type":"item"},{"configs":{"itemId":"neptuneItem","checked":"false","text":"@Str.neptune","group":"theme"},"expanded":false,"children":[],"type":"item"},{"configs":{"itemId":"modernItem","checked":"false","text":"@Str.modern","group":"theme"},"expanded":false,"children":[],"type":"item"}],"type":"item","events":{"menuonshow":"app[Wb.theme + 'Item'].setChecked(true);","menuclick":"if (item && item.group == 'theme') {\n  var theme = item.itemId.slice(0, -4);\n  Wb.request({\n    url: 'm?xwl=sys/portal/home/set-theme',\n    params: {\n      theme: theme\n    },\n    success: function() {\n      Wb.confirm(Str.refreshWindow, function() {\n        location.reload();\n      });\n    }\n  });\n}"}},{"configs":{"itemId":"winMenu","text":"@Str.currentAppList"},"expanded":false,"children":[{"configs":{"itemId":"item1"},"expanded":false,"children":[],"type":"item"}],"type":"item","events":{"menubeforeshow":"var items = [];\napp.tab.items.each(function(card) {\n  items.push({\n    iconCls: card.iconCls,\n    icon: card.icon,\n    text: card.title,\n    cardId: card.id,\n    tooltip: card.title == card.tab.tooltip ? '' : card.tab.tooltip\n  });\n});\nmenu.removeAll(true);\nif (items.length === 0)\n  items.push({\n    text: Str.emptyHint\n  });\nWb.sort(items, 'text');\nmenu.add(items);","menuclick":"if (item.cardId)\n  app.tab.setActiveTab(Ext.getCmp(item.cardId));"}},{"configs":{"itemId":"line3","text":"-"},"expanded":false,"children":[],"type":"item"},{"configs":{"itemId":"saveDesktopBtn","bindModule":"m?xwl=sys/portal/home/save-desktop","text":"@Str.saveDesktop"},"expanded":false,"children":[],"type":"item","events":{"click":"app.saveDesktop(1);"}},{"configs":{"itemId":"saveAsDefaultDesktopItem","bindModule":"m?xwl=sys/portal/home/save-default-desktop","text":"@Str.saveAsDefaultDesktop"},"expanded":false,"children":[],"type":"item","events":{"click":"Wb.confirm(Wb.format(Str.confirmDo, Str.saveAsDefaultDesktop), function() {\n  app.saveDesktop(2);\n});"}},{"configs":{"itemId":"saveAsAllDesktopItem","bindModule":"m?xwl=sys/portal/home/save-all-desktop","text":"@Str.saveAsAllDesktop"},"expanded":false,"children":[],"type":"item","events":{"click":"Wb.confirm(Wb.format(Str.confirmDo, Str.saveAsAllDesktop), function() {\n  app.saveDesktop(3);\n});"}},{"configs":{"itemId":"collectBtn","glyph":"f006","text":"@Str.collect"},"expanded":false,"children":[],"type":"item","events":{"click":"var card = app.tab.activeTab;\nWb.request({\n  url: 'm?xwl=sys/portal/home/collect-page',\n  params: {\n    bindFile: card.bindFile\n  },\n  success: function() {\n    Wb.broadcast('xSysFavoriteAdd', {\n      url: card.bindFile,\n      iconCls: card.iconCls,\n      title: card.title,\n      item: card.bindFile\n    });\n  }\n});"}},{"configs":{"itemId":"settingBtn","glyph":"f013","text":"@Str.homeSetting"},"expanded":false,"children":[],"type":"item","events":{"click":"Wb.run({\n  url: 'm?xwl=sys/portal/home/home-set',\n  success: function(scope) {\n    scope.init(app);\n  }\n});"}},{"configs":{"itemId":"line4","text":"-"},"expanded":true,"children":[],"type":"item"},{"configs":{"itemId":"logoutBtn","glyph":"f011","text":"@Str.logout"},"expanded":false,"children":[],"type":"item","events":{"click":"function doLogout() {\n  Wb.request({\n    url: 'logout',\n    success: function(resp) {\n      Wb.unloadEvents = null;\n      window.location.replace('./');\n    }\n  });\n}\nvar result = Wb.onBeforeUnload();\nif (Wb.isValue(result))\n  Wb.confirm(result + '<br><br>' + Str.confirmLogout, doLogout);\nelse\n  doLogout();"}}],"type":"menu","events":{"show":"var bindFile = app.tab.activeTab.bindFile;\nif (Ext.String.endsWith(bindFile, '.xwl') || bindFile && Wb.verifyName(bindFile) === true)\n  app.collectBtn.setDisabled(false);\nelse\n  app.collectBtn.setDisabled(true);","click":"if (item == app.buttongroup1)\n  menu.hide();"}},{"configs":{"border":"false","itemId":"appMenu","cls":"pt_app_menu"},"expanded":false,"children":[{"configs":{"border":"false","itemId":"listPanel","style":"background:white;"},"expanded":false,"children":[],"type":"comp","events":{"beforerender":"if (Ext.isIE8m)\n  comp.width = 100;","afterrender":"comp.mon(comp.el, 'click', app.monAppClick);"}}],"type":"menu","events":{"beforeshow":"app.createListView(app.listPanel);\nif (Ext.isIE8m)\n  app.listPanel.setWidth(app.listPanel.el.down('table').getWidth());"}},{"configs":{"layout":"border","itemId":"viewport1"},"expanded":true,"children":[{"configs":{"border":"false","layout":"hbox","itemId":"topBar","cls":"x-unselectable pt_topbar","region":"north","height":"38"},"expanded":true,"children":[{"configs":{"itemId":"appTitle","html":"<span itemId=\"appMenuBtn\" class=\"pt_app_title\">{#Var.sys.app.title#}<\/span>"},"expanded":true,"children":[],"type":"comp"},{"configs":{"layout":"fit","border":"false","itemId":"navBarHolder","flex":"1"},"expanded":false,"children":[{"configs":{"itemId":"navIconBar","enableOverflow":"true","hidden":"{#navIconHidden#}"},"expanded":false,"children":[],"type":"toolbar"}],"type":"container"},{"configs":{"itemId":"appButtons","padding":"11 5 0 5","html":"<span itemId=\"reconnectBtn\" class=\"pt_reconnect_btn x-hide-display\">{#Str.reconnect#}<\/span>\n<span itemId=\"userBtn\" style=\"cursor:pointer;\">{#sys.dispname#}{#badgeHtml#}<\/span> | \n<span itemId=\"mainMenuBtn\" style=\"cursor:pointer;\">{#Str.operate#}&nbsp;&nbsp;<span class=\"wb_glyph\" itemId=\"menuBtn\">&#xf107;<\/span><\/span>"},"expanded":false,"children":[],"type":"comp"}],"type":"container","events":{"afterrender":"container.mon(container.el, 'mousedown', function(e, t) {\n  switch (Ext.fly(t).getAttribute('itemId')) {\n    case 'appMenuBtn':\n      app.hideAppMenu = app.appMenu.isVisible();\n      break;\n    case 'mainMenuBtn':\n      app.hideMainMenu = app.mainMenu.isVisible();\n      break;\n    case 'badgeBtn':\n      app.hideNotifyMenu = app.notifyMenu.isVisible && app.notifyMenu.isVisible();\n      break;\n  }\n});\ncontainer.mon(container.el, 'click', function(e, t) {\n  switch (Ext.fly(t).getAttribute('itemId')) {\n    case 'appMenuBtn':\n      if (app.hideAppMenu)\n        app.appMenu.hide();\n      else\n        app.appMenu.showBy(t, 'tl-bl?', [0, -4]);\n      break;\n    case 'userBtn':\n      Wb.run({\n        url: 'account'\n      });\n      break;\n    case 'reconnectBtn':\n      Wb.login();\n      break;\n    case 'mainMenuBtn':\n      if (app.hideMainMenu)\n        app.mainMenu.hide();\n      else\n        app.mainMenu.showBy(t, 'tl-bl?', [0, 7]);\n      break;\n    case 'badgeBtn':\n      if (!app.notifyMenuCreated) {\n        app.notifyMenuCreated = true;\n        //按需创建实例以节省系统资源\n        new Ext.menu.Menu(app.notifyMenu);\n      }\n      if (app.hideNotifyMenu)\n        app.notifyMenu.hide();\n      else {\n        app.notifyStore.load({\n          callback: function(recs, b, succ) {\n            if (succ) {\n              var msgCount = 0;\n              Wb.each(recs, function(rec) {\n                msgCount += rec.data.msgCount;\n              });\n              app.notifyMenu.showBy(t, 'tl-bl?', [0, 7]);\n              app.showBadgeCount(msgCount);\n            }\n          }\n        });\n      }\n      break;\n  }\n});\napp.reconnectBtn = container.el.down('[itemId=reconnectBtn]');\napp.badgeBtn = container.el.down('[itemId=badgeBtn]');\ncontainer.mon(container.el, 'contextmenu', function(e, t) {\n  e.stopEvent();\n  app.mainMenu.showAt(e.getXY());\n});"}},{"configs":{"layout":"card","border":"false","itemId":"moduleView","split":"true","hidden":"{#treeHidden#}","activeItem":"@{#viewIndex#}","collapsed":"{#treeCollapsed#}","width":"{#treeWidth#}","header":"false","cls":"pt_cardpanel","region":"west","collapsible":"true"},"expanded":true,"children":[{"configs":{"border":"false","itemId":"tree","cls":"pt_tree","rootVisible":"false"},"expanded":true,"children":[{"configs":{"itemId":"tbar","hidden":"true","normalName":"searchBar"},"expanded":true,"children":[{"configs":{"itemId":"findCombo","onTriggerClick":"app.tree.selectPath('/Root/' + this.getValue(), 'fileName');","flex":"1","triggerCls":"x-form-search-trigger","displayField":"title","enterKeyTriggerClick":"true","listConfig":"{\n  itemTpl: [\n    '<div>{fullPath}<\/div>'\n  ]\n}","valueField":"fullFile"},"expanded":false,"children":[{"configs":{"itemId":"store","fields":"['path', 'title', 'file', 'parentFile', {\n  name: 'fullPath',\n  convert: function(v, rec) {\n    var data = rec.data;\n    if (data.path)\n      return data.path.substring(1) + '/' + data.title;\n    else return data.title;\n  }\n}, {\n  name: 'fullFile',\n  convert: function(v, rec) {\n    var data = rec.data;\n    if (data.parentFile)\n      return data.parentFile.substring(1) + '/' + data.file;\n    else return data.file;\n  }\n}]","url":"m?xwl=sys/portal/home/find"},"expanded":false,"children":[],"type":"store"}],"type":"combo","events":{"beforequery":"if (plan.query.indexOf('/') != -1 || plan.query.indexOf('\\\\') != -1) {\n  plan.combo.collapse();\n  return false;\n}","select":"combo.onTriggerClick();"}}],"type":"toolbar"},{"configs":{"itemId":"store","normalName":"treeStore","root":"{#treeNodes#}","fields":"['text', 'path', 'fileName', 'inframe', 'pageLink']","url":"m?xwl=sys/portal/home/get-tree"},"expanded":true,"children":[],"type":"treestore","events":{"success":"app.loadView(node);"}}],"type":"tree","events":{"itemclick":"if (record.isLeaf()) {\n  app.openModule(record, e.ctrlKey);\n} else {\n  if (record.isExpanded())\n    record.collapse();\n  else record.expand();\n}","tagEvents":"{\n  itemkeydown: Wb.mimicClick\n}"}},{"configs":{"border":"false","itemId":"listComp","autoScroll":"true"},"expanded":false,"children":[],"type":"comp","events":{"tagEvents":"{\n  activate: function() {\n    app.createListView(app.listComp);\n  }\n}","afterrender":"comp.mon(comp.el, 'click', app.monAppClick);"}},{"configs":{"border":"false","layout":"fit","itemId":"cardComp"},"expanded":true,"children":[{"configs":{"isConfig":"true","border":"false","itemId":"bbar","cls":"pt_searchbar"},"expanded":true,"children":[{"configs":{"fieldCls":"pt_searchfield","hideTrigger":"true","itemId":"cardSearchCombo","margin":"3 5 3 4","onTriggerClick":"return false;","flex":"1","emptyText":"@Str.search","displayField":"title","listConfig":"{\n  itemTpl: ['<div>{fullPath}<\/div>']\n}","valueField":"fullFile"},"expanded":true,"children":[{"configs":{"itemId":"store","filters":"function(rec) {\n  return !rec.data.isFolder;\n}","fields":"['path', 'title', 'file', 'parentFile', 'isFolder', {\n  name: 'fullPath',\n  convert: function(v, rec) {\n    var data = rec.data;\n    if (data.path)\n      return data.path.substring(1) + '/' + data.title;\n    else return data.title;\n  }\n}, {\n  name: 'fullFile',\n  convert: function(v, rec) {\n    var data = rec.data;\n    if (data.parentFile)\n      return data.parentFile.substring(1) + '/' + data.file;\n    else return data.file;\n  }\n}]","url":"m?xwl=sys/portal/home/find"},"expanded":false,"children":[],"type":"store"}],"type":"combo","events":{"beforequery":"if (plan.query.indexOf('/') != -1 || plan.query.indexOf('\\\\') != -1) {\n  plan.combo.collapse();\n  return false;\n}","select":"var node = app.tree.getRootNode().findChild('path', records[0].data.fullFile, true);\nif (node)\n  app.openModule(node);"}}],"type":"toolbar"},{"configs":{"border":"false","itemId":"cardItemsComp","cls":"pt_cardview","autoScroll":"true"},"expanded":false,"children":[],"type":"comp"}],"type":"panel","events":{"tagEvents":"{\n  activate: app.createCardView\n}","hide":"app.navIconBar.hide();","afterrender":"app.cardComp.body.unselectable();\napp.cardComp.mon(app.cardComp.body, 'click', app.monCardCompClick);","show":"app.navIconBar.show();"}}],"type":"panel","events":{"hide":"app.navIconBar.hide();","show":"app.createListView(app.listComp);\napp.createCardView();\nif (panel.getLayout().getActiveItem() == app.cardComp)\n  app.navIconBar.show();"}},{"configs":{"itemId":"tab","plugins":"'tabreorderer'","tabPosition":"@app.userOptions.moduleTabPos","region":"center"},"expanded":true,"children":[],"type":"tab","events":{"afterrender":"tab.mon(tab.tabBar.el, 'contextmenu', function(e, t) {\n  e.stopEvent();\n  app.mainMenu.showAt(e.getXY());\n});","tabchange":"if (newCard && newCard.notLoaded) {\n  newCard.notLoaded = false;\n  Wb.open({\n    reloadCard: newCard,\n    frameOnly: false,\n    notActiveCard: false\n  });\n}"}}],"type":"viewport","events":{"afterrender":"app.doAfterRender();","resize":"if (app.listMenu) {\n  app.listMenu.maxWidth = width - 60;\n  app.listMenu.maxHeight = height;\n}"}}],"type":"module","events":{"finalize":"if (app.demoVersion) {\n  setTimeout(function() {\n    Wb.tip('<div style=\"text-align:center;\"><b>欢迎使用 WebBuilder！<\/b><br>WebBuilder将带给你卓越的开发体验<\/div>');\n  }, 2000);\n}","initialize":"Wb.apply(app, {\n  cardStatusMap: {},\n  reconnectBtnVisible: false,\n  msgCount: parseInt('{#msgCount#}', 10),\n  userOptions: Wb.apply({\n    moduleTabPos: 'top',\n    showMessage: true,\n    showFolderIcon: true,\n    showModuleIcon: true\n  }, Wb.decode(\"{#userOptions#}\")),\n  portletHeader: '{#Var.sys.app.portletHeader#}' == 'true',\n  demoVersion: '{#Var.sys.app.versionType#}' == 'd',\n  /**\n   * 应用用户设置的选项。\n   * @param {Window} win 设置参数的窗口对象。\n   */\n  applyOptions: function(win) {\n    var params = Wb.getStdValue(win);\n    Wb.request({\n      url: 'm?xwl=sys/portal/home/save-user-options',\n      params: {\n        userOptions: params\n      },\n      success: function(resp) {\n        Wb.apply(app.userOptions, params);\n        win.close();\n      }\n    });\n  },\n  /**\n   * 设置顶部工具条中的用户显示名称。\n   */\n  setUserDispName: function(name) {\n    app.topBar.el.down('[itemId=userBtn]').update(name);\n    app.topBar.updateLayout();\n  },\n  /**\n   * 显示新消息的数量。\n   */\n  showBadgeCount: function(count) {\n    if (count < 0)\n      app.msgCount += count;\n    else\n      app.msgCount = count;\n    app.badgeBtn.setStyle('display', app.msgCount ? '' : 'none');\n    app.badgeBtn.update(app.msgCount);\n    app.topBar.updateLayout();\n  },\n  /**\n   * 获得通知信息，在顶部工具条中增加新通知数量并显示通知。\n   * 新通知的格式为：{module:发送的模块，count:通知数量,title:标题,msg:通知的消息}。\n   */\n  getNotifyInfo: function(obj) {\n    var path, title, msg;\n    if (Ext.String.startsWith(obj.module, 'm?xwl='))\n      path = obj.module.substring(6) + '.xwl';\n    else\n      path = obj.module;\n    //当前模块没有激活在home中显示消息\n    if (!path || path != app.tab.getActiveTab().bindFile) {\n      app.msgCount += (obj.count || 0);\n      app.showBadgeCount(app.msgCount);\n      title = obj.title || Str.information;\n      msg = obj.msg || '';\n      if (app.userOptions.showMessage) {\n        if (app.tipWin) {\n          app.tipWin.task.delay(app.tipWin.autoCloseDelay);\n          app.tipWin.setTitle(title);\n          app.tipWin.update(msg);\n        } else {\n          app.tipWin = Wb.tip({\n            bodyStyle: 'background:white;',\n            title: title,\n            html: msg,\n            listeners: {\n              beforeclose: function() {\n                delete app.tipWin;\n              }\n            }\n          });\n        }\n      }\n    }\n  },\n  /**\n   * 获得控制台信息并显示到浏览器控制台。\n   */\n  getConsoleInfo: function(obj) {\n    var msg;\n    msg = obj.msg;\n    if (obj.encode)\n      msg = Wb.decode(msg);\n    if (obj.type)\n      Cs[obj.type](msg);\n    else\n      Cs.log(msg);\n  },\n  /**\n   * 在viewport1渲染完成后执行的方法。\n   */\n  doAfterRender: function() {\n    Ext.suspendLayouts();\n    Wb.setNavigate(app.tab, app.backBtn, app.forwardBtn);\n    app.portal = app.tab.add({\n      appScope: app,\n      itemId: 'homeCard',\n      xtype: 'portalpanel',\n      iconCls: 'home_icon',\n      border: false,\n      title: Str.home,\n      bodyStyle: 'background:#f3f3f3;',\n      reorderable: false\n    });\n    app.tab.setActiveTab(app.portal);\n    app.portal.add([{\n      xtype: 'portalcolumn'\n    }, {\n      xtype: 'portalcolumn'\n    }]);\n    app.populatePortlets();\n    app.populatePages();\n    app.loadView(app.tree.getRootNode());\n    Ext.resumeLayouts(true);\n  },\n  /**\n   * 加载保存的Portlets。\n   */\n  populatePortlets: function() {\n    var items = \"{#portlets#}\",\n      index = 0;\n    if (items) {\n      items = Wb.decode(items);\n      if (items.length) {\n        Wb.each(items, function(col) {\n          Wb.each(col, function(portlet) {\n            app.addPortlet(portlet, null, index);\n          });\n          index++;\n        });\n      }\n    }\n  },\n  /**\n   * 关闭所有Portlet。\n   */\n  closePortal: function() {\n    Ext.suspendLayouts();\n    app.homeCard.items.each(function(col) {\n      col.items.each(function(item) {\n        item.destroy();\n      });\n    });\n    Ext.resumeLayouts(true);\n  },\n  /**\n   * 加载保存的页面。\n   */\n  populatePages: function() {\n    var tab = app.tab;\n    tab.mon(tab.tabBar.el, 'dblclick', function(e, target) {\n      var card = tab.getActiveTab(),\n        url = card.bindFile;\n\n      if (card.tab.el.isAncestor(target) && !card.hasParams && url) {\n        if (Ext.String.endsWith(url, '.xwl'))\n          url = 'm?xwl=' + url.slice(0, -4);\n        window.open(url);\n      }\n    }, tab);\n    var card, tabItems = \"{#tabItems#}\";\n    if (tabItems) {\n      tabItems = Wb.decode(tabItems);\n      if (tabItems.length) {\n        Wb.each(tabItems, function(item) {\n          delete item.newWin;\n          card = Wb.open(Wb.apply(item, {\n            frameOnly: true,\n            notActiveCard: true\n          }));\n          card.notLoaded = true;\n        });\n        app.tab.setActiveTab(parseInt('{#activeIndex#}', 10));\n      }\n    }\n  },\n  /** 显示/隐藏portlets工具条按钮 */\n  showTool: function(panel, visible) {\n    Ext.suspendLayouts();\n    Wb.each(panel.header.query('tool'), function(item) {\n      item.setVisible(visible);\n    });\n    Ext.resumeLayouts(true);\n  },\n  /**\n   * 在Portal首行首列添加指定模块作为Portlet。\n   * @param {Object} config 配置项。\n   * @param {Number} [rowIndex] 行索引号，缺省为最后一行。\n   * @param {Number} [colIndex] 列索引号，缺省为0。\n   */\n  addPortlet: function(config, rowIndex, colIndex) {\n    if (config.newWin || config.inframe || config.container === false || config.download) {\n      Wb.info(Str.invalidPortlet);\n      return;\n    }\n    app.tab.setActiveTab(app.homeCard);\n    var portlet, portletObject = {\n      xtype: 'portlet',\n      layout: 'fit',\n      title: config.title,\n      iconCls: config.iconCls,\n\n      doRefresh: app.refreshPortlet,\n      doMaximize: app.maxPortlet,\n      pageLink: config,\n      collapsible: app.portletHeader,\n      collapsed: config.collapsed || false,\n      height: config.height || 240,\n      lastHeight: config.height || 240,\n      listeners: {\n        afterrender: {\n          single: true,\n          fn: function(me) {\n            if (app.portletHeader)\n              app.showTool(me, false);\n            else\n              me.header.setVisible(false);\n            me.mon(me.el, 'mouseenter', function() {\n              if (!me.toolShown) {\n                if (app.portletHeader)\n                  app.showTool(me, true);\n                else\n                  me.header.setVisible(true);\n                me.toolShown = true;\n              }\n            });\n            me.mon(me.el, 'mouseleave', function() {\n              if (me.toolShown) {\n                if (app.portletHeader)\n                  app.showTool(me, false);\n                else\n                  me.header.setVisible(false);\n                me.toolShown = false;\n              }\n            });\n          }\n        },\n        resize: function(me) {\n          if (!me.collapsed)\n            me.lastHeight = me.getHeight();\n        },\n        beforecollapse: function(me) {\n          me.lastHeight = me.getHeight();\n        },\n        destroy: function(me) {\n          Wb.destroy(me.moduleScope, me);\n        }\n      }\n    };\n    if (rowIndex !== undefined)\n      portlet = app.portal.items.items[colIndex || 0].insert(rowIndex, portletObject);\n    else app.portal.items.items[colIndex || 0].add(portletObject);\n    Wb.run({\n      url: config.url,\n      contextOwner: portlet,\n      success: function(scope) {\n        var entry = Wb.optMain(scope);\n        portlet.moduleScope = scope;\n        if (entry)\n          portlet.add(entry);\n      }\n    });\n  },\n  /**\n   * 刷新Portlets。\n   */\n  refreshPortlet: function(portlet) {\n    var me = portlet || this;\n    me.removeAll();\n    Wb.destroy(me.moduleScope, me);\n    Wb.run({\n      url: me.pageLink.url,\n      contextOwner: me,\n      success: function(scope) {\n        var entry = Wb.optMain(scope);\n        me.moduleScope = scope;\n        if (entry) {\n          me.add(entry);\n        }\n      }\n    });\n  },\n  /**\n   * 最大化Portlets至Tab页。\n   */\n  maxPortlet: function() {\n    Wb.open(this.pageLink);\n  },\n  /**\n   * 获取应用模块的图标样式类。\n   */\n  getAppIcon: function(node, top, nullIcon, cls) {\n    var iconCls = node.data.iconCls;\n    if (cls)\n      cls = cls + ' ';\n    else\n      cls = '';\n    if (!node.data.leaf && !iconCls)\n      iconCls = 'f114';\n    if (Ext.isNumeric('0x' + iconCls)) {\n      return '<span class=\"pt_glyph wb_glyph ' + cls + 'wb_glyphsize\">&#x' + iconCls + ';<\/span>';\n    } else {\n      return '<img src=\"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\" style=\"margin:' +\n        ((top || 2) + (Wb.isNeptune ? -3 : 0)) + 'px 5px 0 4px;\" class=\"x-tree-icon ' + cls +\n        (nullIcon ? 'null_icon' : iconCls) + '\">';\n    }\n  },\n  /**\n   * 显示应用列表。\n   */\n  showAppList: function(e, target) {\n    if (app.clearListTimer)\n      clearTimeout(app.clearListTimer);\n    if (app.showListTimer)\n      clearTimeout(app.showListTimer);\n    //如果鼠标在列表菜单上返回\n    if (app.listMenu.el && app.listMenu.el.isAncestor(target))\n      return;\n    var trEl = Ext.get(target),\n      node = app.treeStore.getNodeById(trEl.getAttribute('node'));\n    if (node.data.leaf) {\n      app.listMenu.hide();\n      return;\n    }\n    app.showListTimer = setTimeout(function() {\n      var hasTable, adjustSize, index, html, first = true;\n      if (app.listMenu.bindTarget != target) {\n        html = '';\n        index = 0;\n        node.eachChild(function(item) {\n          if (!item.data.leaf)\n            return;\n          if (first) {\n            hasTable = true;\n            html += '<p class=\"pt_item_title\">' + app.getAppIcon(node, -2) + node.data.text +\n              '<\/p><table class=\"pt_module\" cellpadding=\"2\">';\n            first = false;\n          }\n          if (index === 0)\n            html += '<tr>';\n          index++;\n          html += '<td>' + app.getAppIcon(item, -1) + '<span class=\"pt_item1\" node=\"' + item.id.substring(1) +\n            '\">' + item.data.text + '<\/span><\/td>';\n          if (index == 4) {\n            index = 0;\n            html += '<\/tr>';\n          }\n        });\n        if (index !== 0)\n          html += '<\/tr>';\n        if (hasTable)\n          html += '<\/table>';\n        node.eachChild(function(item) {\n          if (item.data.leaf)\n            return;\n          html += '<p class=\"pt_item_title\">' + app.getAppIcon(item, -2) + item.data.text +\n            '<\/p><table class=\"pt_module\" cellpadding=\"2\">';\n          index = 0;\n          item.cascadeBy(function(child) {\n            if (child.data.leaf) {\n              if (index === 0)\n                html += '<tr>';\n              index++;\n              html += '<td>' + app.getAppIcon(child, -1) + '<span class=\"pt_item1\" node=\"' + child.id.substring(1) +\n                '\">' + child.data.text + '<\/span><\/td>';\n              if (index == 4) {\n                index = 0;\n                html += '<\/tr>';\n              }\n            }\n          });\n          if (index !== 0)\n            html += '<\/tr>';\n          html += '<\/table>';\n        });\n        delete app.listMenu.width; //取消固定宽度\n        if (app.listMenu.isVisible() && app.listMenu.bindTarget)\n          app.listMenu.bindTarget.saveScrollTop = app.listMenu.el.dom.scrollTop;\n        app.listMenu.update(html);\n        adjustSize = true;\n        app.listMenu.bindTarget = target;\n      }\n      if (adjustSize) {\n        app.listMenu.maxHeight = app.viewport1.getHeight();\n      }\n      app.listMenu.show();\n      if (adjustSize) {\n        if (app.listMenu.el.isScrollable()) {\n          app.listMenu.setWidth(app.listMenu.getWidth() + 20);\n        }\n        app.listMenu.el.alignTo(trEl, 'tr?', [0, -53]);\n        if (app.listMenu.el.getLeft() === 0)\n          app.listMenu.el.setLeft(app.viewport1.getWidth() - app.listMenu.getWidth());\n      }\n      if (app.listMenu.bindTarget.saveScrollTop !== undefined)\n        app.listMenu.el.dom.scrollTop = app.listMenu.bindTarget.saveScrollTop;\n      app.listMenu.focus();\n      app.showListTimer = null;\n    }, 300);\n  },\n  /**\n   * 隐藏应用列表。\n   */\n  hideAppList: function() {\n    if (app.clearListTimer)\n      clearTimeout(app.clearListTimer);\n    if (app.showListTimer)\n      clearTimeout(app.showListTimer);\n    if (app.listMenu.isVisible()) {\n      app.clearListTimer = setTimeout(function() {\n        if (app.listMenu.bindTarget && app.listMenu.el)\n          app.listMenu.bindTarget.saveScrollTop = app.listMenu.el.dom.scrollTop;\n        app.listMenu.hide();\n        app.clearListTimer = null;\n      }, 300);\n    }\n  },\n  /**\n   * 创建应用列表视图。\n   */\n  createListView: function(listComp) {\n    if (listComp.listViewCreated)\n      return;\n    var root = app.tree.getRootNode();\n    if (!root.isLoaded() || !listComp.isVisible())\n      return;\n    var trs, html = '<table cellpadding=\"0\" cellspacing=\"0\" class=\"pt_nav_table\">';\n    root.eachChild(function(node) {\n      html += '<tr node=\"' + node.id.substring(1) +\n        '\"><td>' + app.getAppIcon(node) + node.data.text +\n        (node.data.leaf ? '' : '<span class=\"wb_glyph pt_menu_arrow\">&#xf054;<\/span>') + '<\/td><\/tr>';\n    });\n    html += '<\/table>';\n    listComp.update(html);\n    trs = listComp.el.query('tr');\n    Wb.each(trs, function(tr) {\n      tr = Ext.fly(tr);\n      listComp.mon(tr, 'mouseenter', app.showAppList);\n      listComp.mon(tr, 'mouseleave', app.hideAppList);\n    });\n    if (!listComp.unselSetted) {\n      listComp.el.unselectable();\n      listComp.unselSetted = true;\n    }\n    if (!app.listMenu) {\n      app.listMenu = new Ext.Component({\n        border: true,\n        cls: 'pt_list_menu',\n        floating: true,\n        maxWidth: app.viewport1.getWidth() - 60,\n        minWidth: 120,\n        padding: 4,\n        minHeight: 30,\n        autoScroll: true,\n        listeners: {\n          afterrender: {\n            single: true,\n            fn: function(me) {\n              me.mon(me.el, 'click', app.monAppClick);\n              me.mon(me.el, 'mouseenter', app.showAppList);\n              me.mon(me.el, 'mouseleave', app.hideAppList);\n            }\n          }\n        }\n      });\n      app.appMenu.bindMenuComp = app.listMenu;\n    }\n    listComp.listViewCreated = true;\n  },\n  /**\n   * 根据节点打开指定的模块。\n   * @param {NodeInterface} record 节点对象。\n   * @param {toPortal} 是否在Portal中打开。\n   */\n  openModule: function(record, toPortal) {\n    var data = record.data,\n      pageLink = {\n        url: Wb.toUrl(data.path),\n        title: data.text,\n        iconCls: data.iconCls,\n        inframe: data.inframe\n      };\n    if (data.pageLink) {\n      Ext.apply(pageLink, Wb.decode(data.pageLink));\n    }\n    if (toPortal)\n      app.addPortlet(pageLink, 0);\n    else\n      Wb.open(pageLink);\n  },\n  /**\n   * 监听列表视图中应用的点击事件。\n   */\n  monAppClick: function(e, target) {\n    var nodeId, node, el = Ext.fly(target),\n      toPortal = e.ctrlKey;\n    el = el.up('[node]') || el;\n    if (el && (nodeId = el.getAttribute('node'))) {\n      node = app.treeStore.getNodeById(nodeId);\n      if (node.data.leaf) {\n        if (app.listMenu && app.listMenu.isVisible()) {\n          app.listMenu.bindTarget.saveScrollTop = app.listMenu.el.dom.scrollTop;\n          app.listMenu.hide();\n        }\n        if (app.appMenu.isVisible())\n          app.appMenu.hide();\n        app.openModule(node, toPortal);\n      }\n    }\n  },\n  //动画效果配置\n  fadeConfig: {\n    duration: 600,\n    easing: 'easeIn',\n    from: {\n      backgroundColor: '#7a8fa4'\n    },\n    to: {\n      backgroundColor: '#2a3f54'\n    },\n    listeners: {\n      afteranimate: function() {\n        var target = this.target.target;\n        target.setStyle('backgroundColor', '');\n        target.setStyle('opacity', '');\n      }\n    }\n  },\n  /**\n   * 监听卡片视图中应用的点击事件。\n   */\n  monCardCompClick: function(e, target) {\n    var nodeId, isCollapsed, nodeIsCollapsed, fade, dom, depth, curDepth, lastDepth, span, node, canExpand = true,\n      el = Ext.get(target),\n      toPortal = e.ctrlKey;\n    el = el.up('tr');\n    if (!el)\n      return;\n    nodeId = el.getAttribute('node');\n    if (nodeId) {\n      node = app.treeStore.getNodeById(nodeId);\n      if (node.data.leaf) {\n        if (app.selItemEl)\n          app.selItemEl.removeCls('pt_item_sel');\n        el.addCls('pt_item_sel');\n        app.selItemEl = el;\n        app.openModule(node, toPortal);\n        return;\n      }\n    }\n    curDepth = parseInt(el.getAttribute('depth'), 10);\n    isCollapsed = !Wb.parseBool(el.getAttribute('isCollapsed'));\n    span = el.down('span');\n    if (isCollapsed) {\n      el.removeCls('pt_view_folder_exp');\n      span.removeCls('pt_folder_open');\n      span.addCls('pt_folder');\n      el.down('td').fadeIn(app.fadeConfig);\n    } else {\n      el.addCls('pt_view_folder_exp');\n      span.removeCls('pt_folder');\n      span.addCls('pt_folder_open');\n    }\n    dom = el.dom;\n    dom.setAttribute('isCollapsed', isCollapsed);\n    while ((dom = dom.nextSibling)) {\n      el = Ext.fly(dom);\n      depth = parseInt(el.getAttribute('depth'), 10);\n      if (depth <= curDepth)\n        break;\n      else {\n        if (isCollapsed)\n          el.setStyle('display', 'none');\n        else {\n          if (!canExpand && depth <= lastDepth)\n            canExpand = true;\n          if (canExpand) {\n            el.setStyle('display', '');\n            el.fadeIn(app.fadeConfig);\n          }\n          nodeIsCollapsed = Wb.parseBool(el.getAttribute('isCollapsed'));\n          if (nodeIsCollapsed && canExpand) {\n            canExpand = false;\n            lastDepth = depth;\n          }\n        }\n      }\n    }\n  },\n  /**\n   * 创建应用卡片（抽屉式）视图。\n   */\n  createCardView: function() {\n    var root = app.navIconBar.isVisible() ? app.selAppNode : app.tree.getRootNode();\n    if (app.cardBindNode == root)\n      return;\n    else\n      app.cardBindNode = root;\n    if (!root || !root.isLoaded() || !app.cardComp.isVisible())\n      return;\n    var nullIcon = !app.userOptions.showModuleIcon,\n      navIsVisible = app.navIconBar.isVisible(),\n      indent = navIsVisible ? 2 : 1,\n      hideDepth = navIsVisible ? 2 : 1,\n      nodeId, depth, nodeStatus, collapsed, icon, html;\n    html = '<table itemId=\"moduleListTable\" cellpadding=\"0\" cellspacing=\"0\" class=\"pt_nav_table pt_card_margin\">';\n    root.cascadeBy(function(child) {\n      if (child == root) return;\n      nodeId = child.id.substring(1);\n      depth = child.getDepth();\n      nodeStatus = app.cardStatusMap[nodeId];\n      html += '<tr class=\"';\n      if (!child.data.leaf) {\n        if (nodeStatus && !nodeStatus[1])\n          html += 'pt_view_folder_exp';\n        else\n          html += 'pt_view_folder';\n      } else\n        html += 'pt_view_item';\n      html += '\"';\n      if (depth > hideDepth && (!nodeStatus || nodeStatus[0]))\n        html += ' style=\"display:none;\"';\n      if (depth >= hideDepth && !child.data.leaf && (!nodeStatus || nodeStatus[1])) {\n        html += ' isCollapsed=\"true\"';\n        collapsed = true;\n      } else\n        collapsed = false;\n      html += ' node=\"' + nodeId + '\" depth=\"' + depth +\n        '\"><td style=\"padding:0 8px 0 ' + (18 * (depth - indent) + 8) + 'px;\">';\n      icon = app.getAppIcon(child, null, nullIcon, 'pt_abs_icon');\n      if (child.data.leaf) {\n        html += icon;\n        if (child.data.iconCls)\n          html += '<span class=\"pt_line_icon\"><\/span>';\n        else\n          html += '<span class=\"pt_line_icon pt_ball_icon\"><\/span>';\n      } else {\n        html += '<span class=\"wb_glyph ' + (collapsed ? 'pt_folder' : 'pt_folder_open') +\n          ' pt_folder_flag\"><\/span>' + icon;\n      }\n      html += '<span class=\"pt_item\">' + child.data.text + '<\/span><\/td><\/tr>';\n    });\n    html += '<\/table>';\n    app.cardItemsComp.update(html);\n  },\n  /** 监听列表视图收缩事件 */\n  monCardCollapse: function(card) {\n    card.saveScrollTop = card.body.dom.scrollTop;\n  },\n  /** 监听列表视图展开事件 */\n  monCardExpand: function(card) {\n    card.body.dom.scrollTop = card.saveScrollTop;\n  },\n  /** 重新建立连接的广播事件 */\n  xSessionReconnect: function() {\n    app.notifySocket.open();\n    app.showReconnectBtn(false);\n  },\n  showReconnectBtn: function(visible) {\n    if (app.reconnectBtnVisible != visible) {\n      if (visible)\n        app.reconnectBtn.removeCls('x-hide-display');\n      else\n        app.reconnectBtn.addCls('x-hide-display');\n      app.topBar.updateLayout();\n      app.reconnectBtnVisible = visible;\n    }\n  },\n  /**\n   * 加载视图。\n   * @param {NodeInterface} baseNode 加载的模块目录中的节点。\n   */\n  loadView: function(baseNode) {\n    app.listComp.listViewCreated = false;\n    app.listPanel.listViewCreated = false;\n    app.selAppNode = baseNode.firstChild;\n    app.createListView(app.listComp);\n    app.cardBindNode = null;\n    app.cardStatusMap = {};\n    app.createCardView();\n    var item, data, items = [];\n    app.treeStore.getRootNode().eachChild(function(node) {\n      data = node.data;\n      item = {\n        text: data.text,\n        leaf: data.leaf,\n        node: node\n      };\n      if (data.leaf) {\n        item.handler = app.navIconHandler;\n      } else {\n        Wb.apply(item, {\n          allowDepress: false,\n          toggleGroup: 'navIcon',\n          mouseClickPress: true,\n          listeners: {\n            toggle: app.navIconToggle\n          }\n        });\n      }\n      if (Ext.isNumeric('0x' + data.iconCls))\n        item.glyph = parseInt('0x' + data.iconCls, 16);\n      else\n        item.iconCls = data.iconCls;\n      items.push(item);\n    });\n    Ext.suspendLayouts();\n    app.navIconBar.removeAll();\n    app.navIconBar.add(items);\n    if (app.navIconBar.isVisible() && items.length)\n      app.navIconBar.items.items[0].toggle(true);\n    Ext.resumeLayouts(true);\n  },\n  /**\n   * 导航按钮模块的点击事件。\n   */\n  navIconHandler: function(item) {\n    app.openModule(item.node);\n  },\n  /**\n   * 导航按钮目录的切换事件。\n   */\n  navIconToggle: function(item, pressed) {\n    var node = item.node;\n    if (pressed) {\n      if (app.lastSelIcon) {\n        var listTable;\n        app.lastSelIcon.node.viewScrollPos = app.cardItemsComp.el.dom.scrollTop;\n        //保存cardview节点展开状态\n        listTable = app.cardItemsComp.el.query('[itemId=moduleListTable] tr', true);\n        Wb.each(listTable, function(tr) {\n          tr = Ext.fly(tr);\n          app.cardStatusMap[tr.getAttribute('node')] = [tr.getStyle('display') == 'none', tr.getAttribute('isCollapsed') == 'true'];\n        });\n      }\n      app.lastSelIcon = item;\n      if (app.selAppNode != node) {\n        app.selAppNode = node;\n        app.createCardView();\n      }\n      if (node.viewScrollPos !== undefined)\n        app.cardItemsComp.el.dom.scrollTop = node.viewScrollPos;\n    }\n  },\n  /**\n   * 保存桌面状态。\n   * @param {Number} type 保存的类型。\n   */\n  saveDesktop: function(type) {\n    var pages = [],\n      portlets = [],\n      url;\n    switch (type) {\n      case 1:\n        url = 'save-desktop';\n        break;\n      case 2:\n        url = 'save-default-desktop';\n        break;\n      case 3:\n        url = 'save-all-desktop';\n        break;\n    }\n    app.tab.items.each(function(item) {\n      if (item != app.homeCard) {\n        pages.push({\n          url: item.bindFile,\n          params: item.lastPortalConfigs.params\n        });\n      }\n    });\n    app.homeCard.items.each(function(col) {\n      var items = [];\n      portlets.push(items);\n      col.items.each(function(portlet) {\n        items.push({\n          url: portlet.pageLink.url,\n          height: portlet.lastHeight,\n          collapsed: portlet.collapsed\n        });\n      });\n    });\n    Wb.request({\n      url: 'm?xwl=sys/portal/home/' + url,\n      params: {\n        treeWidth: app.moduleView.width,\n        treeCollapsed: app.moduleView.collapsed !== false,\n        treeHidden: !app.moduleView.isVisible(),\n        navIconHidden: !app.navIconBar.isVisible(),\n        viewIndex: app.moduleView.items.indexOf(app.moduleView.getLayout().getActiveItem()),\n        pages: pages,\n        portlets: portlets,\n        userOptions: app.userOptions,\n        active: app.tab.items.indexOf(app.tab.getActiveTab())\n      }\n    });\n  }\n});"}}],"roles":{},"title":"主页","iconCls":"","inframe":false,"pageLink":"{path:'home', method: 'get', newWin: true}"}